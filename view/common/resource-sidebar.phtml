<div id="resource-data" class="sidebar flags">
    <div class="confirm-main">
        <a href="#" class="sidebar-close o-icon-close"><span class="screen-reader-text"><?php echo $this->translate('Close'); ?></span></a>
        <h3><?php echo $this->translate('Resource data:'); ?></h3>
        <p><?php echo $this->translate('Data from this column applies to the entire resource being imported. Settings here will override any corresponding settings in "Basic Import Settings".'); ?></p>
        <div class="resource-mapping mappings">
            <?php
            $resourceTypeLabels = [
                'items' => $this->translate('Item'),
                'item_sets' => $this->translate('Item set'),
                'media' => $this->translate('Media'),
                'resources' => $this->translate('Resources'),
            ];
            ?>
            <div  class="mapping-group">
                <div class="toggle-nav">
                    <button type="button" data-toggle-selector="#specific-data" class="toggle button active" disabled><?php echo $this->translate(sprintf('%s data', $resourceTypeLabels[$resourceType])); ?></button>
                    <button type="button" data-toggle-selector="#generic-data" class="toggle button"><?php echo $this->translate('Generic data'); ?></button>
                </div>
                <div id="specific-data" class="active toggle-view">
                    <?php if (empty($resourceType) || in_array($resourceType, ['item_sets', 'resources'])): ?>
                    <div class="mapping">
                        <label for="additions">
                            <input type="checkbox" data-flag="column-is_open" data-flag-type="resource-data"><?php echo $this->translate('Open/closed to additions'); ?>
                        </label>
                    </div>
                    <?php endif; ?>
        
                    <?php if (empty($resourceType) || in_array($resourceType, ['items', 'resources'])): ?>
                    <div class="mapping">
                    <h4><?php echo $this->translate('Item set property'); ?></h4>
                    <?php echo $this->propertySelect([
                        'name' => 'column-item_set_property',
                        'options' => [
                            'empty_option' => $this->translate('Select below'),
                            'term_as_value' => false,
                            'prepend_value_options' => [
                                'internal_id' => $this->translate('Internal id'),
                            ],
                            'term_as_value' => true,
                        ],
                        'attributes' => [
                            'id' => 'column-item_set_property',
                            'value' => $this->userSetting('csv_import_identifier_property', 'internal_id'),
                            'class' => 'chosen-select flags',
                            'data-placeholder' => $this->translate('Select the identifier below'),
                            'data-flag' => 'column-item_set_property',
                            'data-flag-type' => 'resource-data',
                            'data-resource-type' => $this->translate('Item set'),
                        ],
                    ]); ?>
                    </div>
                    <?php endif; ?>
        
                    <ul>
                        <?php if (empty($resourceType) || in_array($resourceType, ['item_sets', 'resources'])): ?>
                        <li data-flag="column-is_open" data-flag-type="resource-data">
                            <a href="#" class="button"><span><?php echo $this->translate('Open/closed to additions'); ?></span></a>
                        </li>
                        <?php endif; ?>
                
                        <?php if (empty($resourceType) || in_array($resourceType, ['media', 'resources'])): ?>
                        <li>
                        <?php echo $this->translate('There must be an item identifier to create a media.')?>
                        <?php echo $this->translate('This is generally "dcterms:identifier", but it may be an internal id.')?>
                        </li>
                        <li data-flag="column-item_property" data-flag-type="option">
                            <?php echo $this->propertySelect([
                                'name' => 'column-item_property',
                                'options' => [
                                    'empty_option' => $this->translate('Select below'),
                                    'term_as_value' => false,
                                    'prepend_value_options' => [
                                        'internal_id' => $this->translate('Internal id'),
                                    ],
                                    'term_as_value' => true,
                                ],
                                'attributes' => [
                                    'id' => 'column-item_property',
                                    'value' => $this->userSetting('csv_import_identifier_property', 'internal_id'),
                                    'class' => 'chosen-select',
                                    'data-placeholder' => $this->translate('Select the identifier below'),
                                    'data-flag' => 'column-item_property',
                                    'data-flag-type' => 'resource-data',
                                    'data-resource-type' => $this->translate('Item'),
                                ],
                            ]); ?>
                        </li>
                        <?php endif; ?>
                    </ul>
                </div>
                <div id="generic-data" class="toggle-view">
                    <div class="mapping">
                        <select name="resource-data" class="flags" data-flag-type="resource-data">
                            <option><?php echo $this->translate('Select below'); ?></option>
                            <?php if (empty($resourceType) || $resourceType === 'resources'): ?>
                            <option value="column-resource_type"><?php echo $this->translate('Resource type'); ?></option>
                            <?php endif; ?>
                            <option value="column-resource"><?php echo $this->translate('Internal id'); ?></option>
                            <option value="column-resource_template"><?php echo $this->translate('Resource template name'); ?></option>
                            <option value="column-resource_class"><?php echo $this->translate('Resource class term'); ?></option>
                            <?php if (in_array($userRole, ['global_admin', 'site_admin'])): ?>
                            <option value="column-owner_email"><?php echo $this->translate('Owner email address'); ?></option>
                            <?php endif; ?>
                            <option value="column-is_public"><?php echo $this->translate('Visibility public/private'); ?></option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    
        <?php if (empty($resourceType) || in_array($resourceType, ['items', 'resources'])): ?>
        <div class="resource-mapping options">
            <h4><?php echo $this->translate('Options'); ?></h4>
            <ul>
                <li class="column-multivalue">
                    <a href="#" class="button column-multivalue"><span><?php echo $this->translate('Use multivalue separator'); ?></span></a>
                    <p><?php echo $this->translate('(Only applies to item set id)'); ?></p>
                </li>
            </ul>
        </div>
        <?php endif; ?>
    </div>
    <div class="confirm-panel">
        <button type="button" class="apply"><?php echo $this->translate('Apply changes'); ?></button>
    </div>
</div>
